{"version":3,"sources":["matrix-rain.js"],"names":["Letter","characterValue","TIMES","FADE_IN","FADE_OUT","CHANGE_COLOR","_this","this","_animation","red","green","blue","alpha","character","ended","getColor","Math","floor","TimelineMax","onComplete","add","TweenMax","to","Column","widthCanvasValue","heightCanvasValue","SIZE","MIN","MAX","VALID_CHARS","x","random","size","letters","_addNewLetter","index","length","letter","push","setTimeout","hasToBeRemoved","lastLetterIndex","MatrixRain","selectorId","_domElement","document","getElementById","_context","getContext","_columns","_createNewColumn","column","width","height","_updateFrame","timestamp","clearRect","_draw","requestAnimationFrame","textBaseline","shadowBlur","i","j","color","font","shadowColor","fillStyle","fillText","splice","initialize","$","window"],"mappings":"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","file":"matrix-rain.min.js","sourcesContent":["/*\n *               MatrixRain.JS v. 2.0.1\n *\n *             Written by Bilotta Matteo.\n *\n *  Copyright © 2016, Bylothink. All rights reserved.\n */\n\nvar Letter = function(characterValue)\n{\n    // Private constants:\n        const TIMES = {\n\n            FADE_IN: 0.1,\n            FADE_OUT: 3, // 2.7,\n\n            CHANGE_COLOR: 0.3 // 0.2\n        };\n\n    // Private properties:\n        var _this = this;\n        var _animation = null;\n\n    // Public properties:\n        this.red = 255;\n        this.green = 255;\n        this.blue = 255;\n        this.alpha = 0;\n\n        this.character = characterValue;\n\n        this.ended = false;\n\n    // Public methods:\n        this.getColor = function()\n        {\n            return \"rgba(\" + Math.floor(_this.red) + \", \" + Math.floor(_this.green) + \", \" + Math.floor(_this.blue) + \", \" + _this.alpha + \")\";\n        };\n\n    // Start executions...\n        _animation = new TimelineMax({\n\n            onComplete: function()\n            {\n                _this.ended = true;\n            }\n        });\n\n        _animation.add(TweenMax.to(_this, TIMES.FADE_IN, { alpha: 1 }));\n        _animation.add(TweenMax.to(_this, TIMES.CHANGE_COLOR, {\n\n            red: 0,\n            blue: 0\n        }));\n\n        _animation.add(TweenMax.to(_this, TIMES.FADE_OUT, { alpha: 0 }));\n};\n\nvar Column = function(widthCanvasValue, heightCanvasValue)\n{\n    // Private constants:\n        const SIZE = {\n\n            MIN: 15,\n            MAX: 20\n        };\n\n        const NEW_LETTER_RATIO = 75;\n\n        const VALID_CHARS = [\n\n            \"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\", \"h\", \"i\", \"j\", \"k\", \"l\", \"m\", \"n\", \"o\", \"p\", \"q\", \"r\", \"s\", \"t\", \"u\", \"v\", \"w\", \"x\", \"y\", \"z\",\n            \"A\", \"B\", \"C\", \"D\", \"E\", \"F\", \"G\", \"H\", \"I\", \"J\", \"K\", \"L\", \"M\", \"N\", \"O\", \"P\", \"Q\", \"R\", \"S\", \"T\", \"U\", \"V\", \"W\", \"X\", \"Y\", \"Z\",\n            \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"0\", \"£\", \"$\", \"€\", \"§\", \"%\", \"&\", \"!\", \"?\", \"@\", \"#\", \"(\", \")\", \"[\", \"]\", \"{\", \"}\"\n        ];\n\n    // Private properties:\n        var _this = this;\n\n    // Public properties:\n        this.x = Math.floor(Math.random() * widthCanvasValue);\n        this.size = Math.floor(Math.random() * SIZE.MAX) + SIZE.MIN;\n\n        this.ended = false;\n\n        this.letters = [];\n\n    // Private methods:\n        var _addNewLetter = function()\n        {\n            var index = Math.floor(Math.random() * VALID_CHARS.length);\n            var letter = new Letter(VALID_CHARS[index]);\n\n            _this.letters.push(letter);\n\n            if ((_this.letters.length * _this.size) < heightCanvasValue)\n            {\n                // setTimeout(jQuery.proxy(this.addNewLetter, this), NEW_LETTER_RATIO);\n\n                setTimeout(_addNewLetter, NEW_LETTER_RATIO);\n            }\n            else\n            {\n                _this.ended = true;\n            }\n        };\n\n    // Public methods:\n        this.hasToBeRemoved = function()\n        {\n            if (_this.ended === true)\n            {\n                var lastLetterIndex = _this.letters.length - 1;\n\n                if (_this.letters[lastLetterIndex].ended === true)\n                {\n                    return true;\n                }\n            }\n\n            return false;\n        };\n\n    // Start executions...\n        _addNewLetter();\n};\n\nvar MatrixRain = function(selectorId)\n{\n    // Private constants:\n        const BLUR_VALUE = 10;\n        const MAX_COLUMNS = 500000;\n        const NEW_COLUMN_RATIO = 17;\n\n    // Private properties:\n        var _this = this;\n\n        var _domElement = document.getElementById(selectorId);\n\n        var _context = _domElement.getContext(\"2d\");\n\n        var _columns = [];\n\n    // Private methods:\n        var _createNewColumn = function()\n        {\n            if (_columns.length < MAX_COLUMNS)\n            {\n                var column = new Column(_domElement.width, _domElement.height);\n\n                _columns.push(column);\n\n                setTimeout(_createNewColumn, NEW_COLUMN_RATIO);\n            }\n        };\n\n        var _updateFrame = function(timestamp)\n        {\n            _context.clearRect(0, 0, _domElement.width, _domElement.height);\n\n            _draw();\n\n            requestAnimationFrame(_updateFrame);\n        };\n\n        var _draw = function()\n        {\n            _context.textBaseline = \"top\";\n            _context.shadowBlur = BLUR_VALUE;\n\n            for (var i = 0; i < _columns.length; i += 1)\n            {\n                // _context.measureText(<string>).width\n\n                var x = _columns[i].x;\n                var size = _columns[i].size;\n                var letters = _columns[i].letters;\n\n                for (var j = 0; j < letters.length; j += 1)\n                {\n                    if (letters[j].alpha > 0)\n                    {\n                        var color = letters[j].getColor();\n                        var character = letters[j].character;\n\n                        _context.font = size + \"px monospace\";\n\n                        _context.shadowColor = color;\n                        _context.fillStyle = color;\n\n                        _context.fillText(character, x, j * size);\n                    }\n                }\n\n                if (_columns[i].hasToBeRemoved() === true)\n                {\n                    _columns.splice(i, 1);\n                }\n            }\n        };\n\n    // Public methods:\n        this.initialize = function()\n        {\n            _domElement.height = $(window).height();\n            _domElement.width = $(window).width();\n\n            _createNewColumn();\n        };\n\n\n    // Start executions...\n        requestAnimationFrame(_updateFrame);\n};\n"]}