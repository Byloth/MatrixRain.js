{"version":3,"sources":["matrix-rain.js"],"names":["Letter","characterValue","TIMES","FADE_IN","FADE_OUT","CHANGE_COLOR","_this","this","_animation","red","green","blue","alpha","character","ended","getColor","Math","floor","TimelineMax","onComplete","add","TweenMax","to","Column","widthCanvasValue","heightCanvasValue","SIZE","MIN","MAX","NEW_LETTER_RATIO","VALID_CHARS","x","random","size","letters","_addNewLetter","index","length","letter","push","setTimeout","hasToBeRemoved","lastLetterIndex","MatrixRain","selectorId","BLUR_VALUE","MAX_COLUMNS","NEW_COLUMN_RATIO","_domElement","document","getElementById","_context","getContext","_columns","_createNewColumn","column","width","height","_updateFrame","timestamp","clearRect","_draw","requestAnimationFrame","textBaseline","shadowBlur","i","j","color","font","shadowColor","fillStyle","fillText","splice","initialize","$","window"],"mappings":"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","file":"matrix-rain.min.js","sourcesContent":["/*\r\n *\t\t\t\t MatrixRain.JS v. 2.0\r\n *\r\n *\t\t\t  Written by Bilotta Matteo.\r\n *\r\n * Copyright © 2016, Bylothink. All rights reserved.\r\n */\r\n\r\nvar Letter = function(characterValue)\r\n{\r\n    // Private constants:\r\n        var TIMES = {\r\n\r\n            FADE_IN: 0.1,\r\n            FADE_OUT: 3, // 2.7,\r\n\r\n            CHANGE_COLOR: 0.3 // 0.2\r\n        };\r\n\r\n    // Private properties:\r\n        var _this = this;\r\n        var _animation = null;\r\n\r\n    // Public properties:\r\n        this.red = 255;\r\n        this.green = 255;\r\n        this.blue = 255;\r\n        this.alpha = 0;\r\n\r\n        this.character = characterValue;\r\n\r\n        this.ended = false;\r\n\r\n    // Public methods:\r\n        this.getColor = function()\r\n        {\r\n            return \"rgba(\" + Math.floor(_this.red) + \", \" + Math.floor(_this.green) + \", \" + Math.floor(_this.blue) + \", \" + _this.alpha + \")\";\r\n        };\r\n\r\n    // Start executions...\r\n        _animation = new TimelineMax({\r\n\r\n            onComplete: function()\r\n            {\r\n                _this.ended = true;\r\n            }\r\n        });\r\n\r\n        _animation.add(TweenMax.to(_this, TIMES.FADE_IN, { alpha: 1 }));\r\n        _animation.add(TweenMax.to(_this, TIMES.CHANGE_COLOR, {\r\n\r\n            red: 0,\r\n            blue: 0\r\n        }));\r\n\r\n        _animation.add(TweenMax.to(_this, TIMES.FADE_OUT, { alpha: 0 }));\r\n};\r\n\r\nvar Column = function(widthCanvasValue, heightCanvasValue)\r\n{\r\n    // Private constants:\r\n        var SIZE = {\r\n\r\n            MIN: 15,\r\n            MAX: 20\r\n        };\r\n\r\n        var NEW_LETTER_RATIO = 75;\r\n\r\n        var VALID_CHARS = [\r\n\r\n            \"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\", \"h\", \"i\", \"j\", \"k\", \"l\", \"m\", \"n\", \"o\", \"p\", \"q\", \"r\", \"s\", \"t\", \"u\", \"v\", \"w\", \"x\", \"y\", \"z\",\r\n            \"A\", \"B\", \"C\", \"D\", \"E\", \"F\", \"G\", \"H\", \"I\", \"J\", \"K\", \"L\", \"M\", \"N\", \"O\", \"P\", \"Q\", \"R\", \"S\", \"T\", \"U\", \"V\", \"W\", \"X\", \"Y\", \"Z\",\r\n            \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"0\", \"£\", \"$\", \"€\", \"§\", \"%\", \"&\", \"!\", \"?\", \"@\", \"#\", \"(\", \")\", \"[\", \"]\", \"{\", \"}\"\r\n        ];\r\n\r\n    // Private properties:\r\n        var _this = this;\r\n\r\n    // Public properties:\r\n        this.x = Math.floor(Math.random() * widthCanvasValue);\r\n        this.size = Math.floor(Math.random() * SIZE.MAX) + SIZE.MIN;\r\n\r\n        this.ended = false;\r\n\r\n        this.letters = [];\r\n\r\n    // Private methods:\r\n        var _addNewLetter = function()\r\n        {\r\n            var index = Math.floor(Math.random() * VALID_CHARS.length);\r\n            var letter = new Letter(VALID_CHARS[index]);\r\n\r\n            _this.letters.push(letter);\r\n\r\n            if ((_this.letters.length * _this.size) < heightCanvasValue)\r\n            {\r\n                // setTimeout(jQuery.proxy(this.addNewLetter, this), NEW_LETTER_RATIO);\r\n\r\n                setTimeout(_addNewLetter, NEW_LETTER_RATIO);\r\n            }\r\n            else\r\n            {\r\n                _this.ended = true;\r\n            }\r\n        };\r\n\r\n    // Public methods:\r\n        this.hasToBeRemoved = function()\r\n        {\r\n            if (_this.ended === true)\r\n            {\r\n                var lastLetterIndex = _this.letters.length - 1;\r\n\r\n                if (_this.letters[lastLetterIndex].ended === true)\r\n                {\r\n                    return true;\r\n                }\r\n            }\r\n\r\n            return false;\r\n        };\r\n\r\n    // Start executions...\r\n        _addNewLetter();\r\n};\r\n\r\nvar MatrixRain = function(selectorId)\r\n{\r\n    // Private constants:\r\n        var BLUR_VALUE = 10;\r\n        var MAX_COLUMNS = 500000;\r\n        var NEW_COLUMN_RATIO = 17;\r\n\r\n    // Private properties:\r\n        var _this = this;\r\n\r\n        var _domElement = document.getElementById(selectorId);\r\n\r\n        var _context = _domElement.getContext(\"2d\");\r\n\r\n        var _columns = [];\r\n\r\n    // Private methods:\r\n        var _createNewColumn = function()\r\n        {\r\n            if (_columns.length < MAX_COLUMNS)\r\n            {\r\n                var column = new Column(_domElement.width, _domElement.height);\r\n\r\n                _columns.push(column);\r\n\r\n                setTimeout(_createNewColumn, NEW_COLUMN_RATIO);\r\n            }\r\n        };\r\n\r\n        var _updateFrame = function(timestamp)\r\n        {\r\n            _context.clearRect(0, 0, _domElement.width, _domElement.height);\r\n\r\n            _draw();\r\n\r\n            requestAnimationFrame(_updateFrame);\r\n        };\r\n\r\n        var _draw = function()\r\n        {\r\n            _context.textBaseline = \"top\";\r\n            _context.shadowBlur = BLUR_VALUE;\r\n\r\n            for (var i = 0; i < _columns.length; i += 1)\r\n            {\r\n                // _context.measureText(<string>).width\r\n\r\n                var x = _columns[i].x;\r\n                var size = _columns[i].size;\r\n                var letters = _columns[i].letters;\r\n\r\n                for (var j = 0; j < letters.length; j += 1)\r\n                {\r\n                    if (letters[j].alpha > 0)\r\n                    {\r\n                        var color = letters[j].getColor();\r\n                        var character = letters[j].character;\r\n\r\n                        _context.font = size + \"px monospace\";\r\n\r\n                        _context.shadowColor = color;\r\n                        _context.fillStyle = color;\r\n\r\n                        _context.fillText(character, x, j * size);\r\n                    }\r\n                }\r\n\r\n                if (_columns[i].hasToBeRemoved() === true)\r\n                {\r\n                    _columns.splice(i, 1);\r\n                }\r\n            }\r\n        };\r\n\r\n    // Public methods:\r\n        this.initialize = function()\r\n        {\r\n            _domElement.height = $(window).height();\r\n            _domElement.width = $(window).width();\r\n\r\n            _createNewColumn();\r\n        };\r\n\r\n\r\n    // Start executions...\r\n        requestAnimationFrame(_updateFrame);\r\n};\r\n"]}